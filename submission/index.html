<form id="uploadForm">
  <input type="file" id="photo" accept="image/*" required />
  <input type="text" id="caption" placeholder="Caption" />
  <button type="submit">Upload</button>
</form>

<script>
const UPLOAD_URL =
  "https://script.google.com/macros/s/AKfycby8tIqEmXkUv4zrvcGPHjdm0Ji9miKNk17aNb0KKDCPaP3Am35ntEV4ssBOtB_uplTRRA/exec";

document.getElementById("uploadForm").addEventListener("submit", async e => {
  e.preventDefault();

  const file = document.getElementById("photo").files[0];
  const caption = document.getElementById("caption").value;

  const res = await fetch(
    `${UPLOAD_URL}?caption=${encodeURIComponent(caption)}`,
    {
      method: "POST",
      body: file
    }
  );

  const data = await res.json();

  if (data.success) {
    alert("Upload successful!");
    e.target.reset();
  } else {
    alert("Upload failed: " + data.error);
  }
});
</script>
